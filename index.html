<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHAAYE JUNCTION - Premium Tea Experience</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Satisfy&display=swap');
        
        :root {
            --primary: #1a1a1a;
            --secondary: #ffffff;
            --accent: #ff6b35;
            --gold: #d4af37;
            --text: #333333;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 100%);
            margin: 0;
            padding: 0;
            color: #e0e0e0;
        }
        
        .font-script {
            font-family: 'Satisfy', cursive;
        }

        /* Luxury Theme Styles */
        .luxury-bg {
            background: linear-gradient(135deg, #000000 0%, #2c2c2c 100%);
        }
        
        .gold-gradient {
            background: linear-gradient(135deg, #d4af37, #f9e076, #d4af37);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* Advanced Animations */
        @keyframes hologram-appear {
            0% { 
                opacity: 0;
                filter: hue-rotate(0deg) blur(20px);
                transform: scale(0.3) translateY(100px) rotateX(90deg);
            }
            100% { 
                opacity: 1;
                filter: hue-rotate(360deg) blur(0px);
                transform: scale(1) translateY(0) rotateX(0);
            }
        }
        
        @keyframes particle-explosion {
            0% { transform: translate(0, 0) scale(0); opacity: 1; }
            100% { transform: translate(var(--x, 0), var(--y, 0)) scale(1); opacity: 0; }
        }
        
        @keyframes morph-shape {
            0% { border-radius: 60% 40% 30% 70%/60% 30% 70% 40%; }
            50% { border-radius: 30% 60% 70% 40%/50% 60% 30% 60%; }
            100% { border-radius: 60% 40% 30% 70%/60% 30% 70% 40%; }
        }
        
        @keyframes gradient-flow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        @keyframes float-3d {
            0%, 100% { transform: translateY(0px) rotateX(0deg) rotateY(0deg); }
            25% { transform: translateY(-20px) rotateX(5deg) rotateY(5deg); }
            50% { transform: translateY(-10px) rotateX(-5deg) rotateY(-5deg); }
            75% { transform: translateY(-15px) rotateX(3deg) rotateY(-3deg); }
        }
        
        @keyframes flip-in {
            0% { transform: rotateY(90deg) scale(0.8); opacity: 0; }
            100% { transform: rotateY(0deg) scale(1); opacity: 1; }
        }
        
        @keyframes confetti-fall {
            0% { transform: translateY(-100px) rotate(0deg) scale(0); }
            100% { transform: translateY(100vh) rotate(360deg) scale(1); }
        }
        
        @keyframes digital-print {
            0% { 
                height: 0;
                opacity: 0;
                transform: perspective(1000px) rotateX(90deg) scale(0.8);
            }
            100% { 
                height: auto;
                opacity: 1;
                transform: perspective(1000px) rotateX(0deg) scale(1);
            }
        }
        
        @keyframes sparkle {
            0%, 100% { opacity: 0; transform: scale(0) rotate(0deg); }
            50% { opacity: 1; transform: scale(1) rotate(180deg); }
        }

        /* Animation Classes */
        .animate-hologram { animation: hologram-appear 2s ease-out forwards; }
        .animate-particle { animation: particle-explosion 1.5s ease-out forwards; }
        .animate-morph { animation: morph-shape 4s ease-in-out infinite; }
        .animate-gradient-flow { 
            background: linear-gradient(-45deg, #d4af37, #ff6b35, #d4af37, #ff6b35);
            background-size: 400% 400%;
            animation: gradient-flow 3s ease infinite;
        }
        .animate-float-3d { animation: float-3d 4s ease-in-out infinite; }
        .animate-flip-in { animation: flip-in 0.8s ease-out forwards; }
        .animate-confetti { animation: confetti-fall 2s ease-out forwards; }
        .animate-digital-print { animation: digital-print 1.2s ease-out forwards; }
        .animate-sparkle { animation: sparkle 2s ease-in-out infinite; }

        /* Existing Animations (Enhanced) */
        @keyframes fade-in-up {
            from { opacity: 0; transform: translateY(50px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        
        .animate-fade-in-up {
            animation: fade-in-up 1s ease-out forwards;
        }

        @keyframes mug-float-3d {
            0%, 100% { transform: translateY(0) rotate(0deg) rotateX(0deg); }
            25% { transform: translateY(-15px) rotate(-3deg) rotateX(5deg); }
            50% { transform: translateY(-8px) rotate(3deg) rotateX(-3deg); }
            75% { transform: translateY(-12px) rotate(-1deg) rotateX(2deg); }
        }
        
        .animate-mug-float-3d {
            animation: mug-float-3d 3s infinite ease-in-out;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #1a1a1a;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #d4af37, #ff6b35);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #ff6b35, #d4af37);
        }

        /* Ripple Effect Enhancement */
        .ripple-effect::after {
            background: radial-gradient(circle, rgba(212, 175, 55, 0.6) 0%, rgba(255, 107, 53, 0.3) 100%);
        }

        /* Success Animation Enhancement */
        @keyframes success-explosion {
            0% { transform: scale(0); opacity: 1; }
            70% { transform: scale(1.2); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .success-explosion {
            animation: success-explosion 0.6s ease-out;
        }

        /* Mug floating animation */
        @keyframes mug-float {
          0%, 100% { transform: translateY(0) rotate(0deg); }
          25% { transform: translateY(-10px) rotate(-2deg); }
          50% { transform: translateY(-5px) rotate(2deg); }
          75% { transform: translateY(-8px) rotate(-1deg); }
        }
        .animate-mug-float {
          animation: mug-float 3s infinite ease-in-out;
        }

        /* Steam rising */
        @keyframes steam-rise {
          0% { transform: translateY(0) scaleY(1); opacity: 0.7; }
          50% { transform: translateY(-15px) scaleY(1.2); opacity: 0.4; }
          100% { transform: translateY(-30px) scaleY(1.5); opacity: 0; }
        }
        .animate-steam-rise {
          animation: steam-rise 2s infinite ease-out;
        }

        /* Text glow */
        @keyframes text-glow {
          0%, 100% { text-shadow: 0 0 5px rgba(109, 76, 65, 0.3); }
          50% { text-shadow: 0 0 15px rgba(109, 76, 65, 0.6); }
        }
        .animate-text-glow {
          animation: text-glow 2s infinite ease-in-out;
        }

        /* Typing animation */
        @keyframes typing {
          from { width: 0 }
          to { width: 100% }
        }
        @keyframes blink-caret {
          from, to { border-color: transparent }
          50% { border-color: #6D4C41 }
        }
        .typing-animation {
          overflow: hidden;
          border-right: 2px solid #6D4C41;
          white-space: nowrap;
          animation: typing 3.5s steps(40, end), blink-caret 0.75s step-end infinite;
        }

        /* Premium Button Styles */
        .premium-btn {
            background: linear-gradient(135deg, #d4af37 0%, #ff6b35 100%);
            border: none;
            border-radius: 50px;
            padding: 16px 32px;
            font-weight: bold;
            font-size: 18px;
            color: white;
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.3);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .premium-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(212, 175, 55, 0.4);
        }
        
        .premium-btn:active {
            transform: translateY(-1px);
        }
        
        .premium-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: 0.5s;
        }
        
        .premium-btn:hover::before {
            left: 100%;
        }
        
        .secondary-btn {
            background: transparent;
            border: 2px solid #d4af37;
            border-radius: 50px;
            padding: 16px 32px;
            font-weight: bold;
            font-size: 18px;
            color: #d4af37;
            transition: all 0.3s ease;
        }
        
        .secondary-btn:hover {
            background: rgba(212, 175, 55, 0.1);
            transform: translateY(-3px);
        }
        
        .order-btn {
            background: linear-gradient(135deg, #25D366 0%, #1fb859 100%);
            border: none;
            border-radius: 15px;
            padding: 18px 36px;
            font-weight: bold;
            font-size: 20px;
            color: white;
            box-shadow: 0 8px 25px rgba(37, 211, 102, 0.3);
            transition: all 0.3s ease;
            width: 100%;
        }
        
        .order-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(37, 211, 102, 0.4);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script>
        // Enhanced Menu Data
        const menuData = {
            chaaye: [
                { name: "Tandoori Chaaye", price: 200, desc: "Smoky clay pot flavor", icon: "fire", tags: ["popular", "smoky"] },
                { name: "Karak Chaaye", price: 150, desc: "Strong & refreshing", icon: "mug-hot", tags: ["strong", "traditional"] },
                { name: "Doodh Patti", price: 180, desc: "Rich milk tea", icon: "blender", tags: ["creamy", "rich"] },
                { name: "Qehwa", price: 100, desc: "Traditional green tea", icon: "leaf", tags: ["healthy", "traditional"] },
                { name: "Green Tea", price: 100, desc: "Healthy & light", icon: "seedling", tags: ["healthy", "light"] }
            ],
            coffee: [
                { name: "Beat Coffee", price: 250, desc: "Frothy hand-beaten", icon: "coffee", tags: ["frothy", "premium"] },
                { name: "Black Coffee", price: 150, desc: "Pure caffeine kick", icon: "mug-saucer", tags: ["strong", "pure"] }
            ],
            desserts: [
                { name: "Hot Gulab Jamun", price: 200, desc: "Warm sweet delight", icon: "circle", tags: ["sweet", "hot"] },
                { name: "Boiled Egg", price: 80, desc: "Simple protein snack", icon: "egg", tags: ["protein", "simple"] }
            ]
        };

        const phoneNumber = "923441246946";
        const restaurantPhone = "+92 344 1246946";
        const creatorInfo = {
            name: "Amanullah",
            contact: "03015956684"
        };

        // Enhanced Features Data
        const features = [
            { icon: "üîÆ", title: "Feedback", desc: "€ÅŸÖÿßÿ±€å ⁄Üÿßÿ¶€í⁄©€åÿ≥€å ŸÑ⁄Ø€å", type: "ar" },
            { icon: "üöö", title: "Free Delivery", desc: "On orders above Rs. 500", type: "delivery" },
            { icon: "‚è∞", title: "Quick Service", desc: "Ready in 10-15 minutes", type: "service" },
            { icon: "üì±", title: "Easy Ordering", desc: "Simple and fast", type: "ordering" },
            { icon: "üí≥", title: "Secure Payment", desc: "Multiple payment options", type: "payment" },
            { icon: "‚≠ê", title: "Premium Quality", desc: "Finest ingredients", type: "quality" }
        ];

        const testimonials = [
            { name: "Ali R.", comment: "The best tea in town with amazing service!", rating: 5, verified: true },
            { name: "Sara K.", comment: "Quick delivery and always fresh ingredients.", rating: 5, verified: true },
            { name: "Ahmed M.", comment: "Love the variety and premium quality.", rating: 4, verified: true }
        ];

        // Icon mapping
        const getIcon = (key) => {
            switch (key) {
                case "fire": return "üî•";
                case "mug-hot": return "‚òï";
                case "blender": return "ü•§";
                case "leaf": return "üçÉ";
                case "seedling": return "üå±";
                case "coffee": return "‚òï";
                case "mug-saucer": return "‚òï";
                case "circle": return "üçÆ";
                case "egg": return "ü•ö";
                default: return "‚òï";
            }
        };

        // Components
        const SplashScreen = () => {
            return `
                <div class="fixed inset-0 luxury-bg z-50 flex flex-col items-center justify-center text-white">
                    <!-- Steaming Cup -->
                    <div class="relative mb-8">
                        <div class="animate-mug-float text-8xl">‚òï</div>
                        
                        <!-- Steam -->
                        <div class="absolute -top-8 left-1/2 transform -translate-x-1/2 w-4 h-6 bg-gray-200 rounded-full opacity-70 animate-steam-rise"></div>
                        <div class="absolute -top-10 left-1/2 transform -translate-x-1/3 w-3 h-5 bg-gray-300 rounded-full opacity-50 animate-steam-rise" style="animation-delay: 0.5s"></div>
                        <div class="absolute -top-12 left-1/2 transform translate-x-1/4 w-2 h-4 bg-gray-400 rounded-full opacity-40 animate-steam-rise" style="animation-delay: 1s"></div>
                    </div>

                    <!-- Title - Centered -->
                    <div class="text-center">
                        <h1 class="text-6xl md:text-7xl font-script mb-3 animate-fade-in-up animate-text-glow">
                            Chaaye Junction
                        </h1>

                        <!-- Tagline -->
                        <p class="text-lg md:text-xl opacity-80 animate-fade-in-up typing-animation" style="animation-delay: 0.3s">
                            Freshness in Every Sip
                        </p>
                    </div>
                </div>
            `;
        };

        const Header = (cartCount, onCartClick, cartAnimation, showBackButton = false, onBackClick = '') => {
            return `
                <header class="sticky top-0 z-40 glass-effect text-white shadow-2xl border-b border-gray-700">
                    <div class="container mx-auto px-4 py-4 flex justify-between items-center">
                        <div class="flex items-center gap-3">
                            ${showBackButton ? `
                                <button onclick="${onBackClick}" class="back-to-home mr-2 p-2 hover:bg-white/10 rounded-full transition-all duration-300 hover:scale-110">
                                    <span class="text-xl gold-gradient">‚Üê</span>
                                </button>
                            ` : ''}
                            <span class="text-3xl animate-float-3d">‚òï</span>
                            <div>
                                <h1 class="text-2xl font-bold font-script gold-gradient">Chaaye Junction</h1>
                                <p class="text-xs opacity-70">Premium Tea Experience</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-4">
                            <a href="tel:${restaurantPhone.replace(/\s+/g, '')}" class="hidden md:flex items-center gap-2 glass-effect px-4 py-2 rounded-full text-sm hover:bg-white/10 transition-all duration-300 hover:scale-105">
                                <span class="text-lg">üìû</span> 
                                <span>${restaurantPhone}</span>
                            </a>
                            <button onclick="${onCartClick}" class="relative p-3 glass-effect rounded-full transition-all duration-300 hover:scale-110 hover:bg-white/10">
                                <span class="text-2xl ${cartAnimation ? 'animate-cart-bounce' : ''}">üõí</span>
                                ${cartCount > 0 ? `
                                    <span class="absolute -top-1 -right-1 animate-gradient-flow text-white text-xs font-bold w-6 h-6 flex items-center justify-center rounded-full border-2 border-white">
                                        ${cartCount}
                                    </span>
                                ` : ''}
                            </button>
                        </div>
                    </div>
                </header>
            `;
        };

        const HeroSection = () => {
            return `
                <section class="relative luxury-bg text-white py-20 md:py-28 overflow-hidden">
                    <!-- Animated Background -->
                    <div class="absolute inset-0 opacity-10">
                        <div class="absolute top-10 left-10 w-20 h-20 bg-gradient-to-r from-#d4af37 to-#ff6b35 rounded-full animate-morph"></div>
                        <div class="absolute top-40 right-20 w-32 h-32 bg-gradient-to-r from-#ff6b35 to-#d4af37 rounded-full animate-morph" style="animation-delay: 2s"></div>
                        <div class="absolute bottom-20 left-1/4 w-24 h-24 bg-gradient-to-r from-#d4af37 to-#ff6b35 rounded-full animate-morph" style="animation-delay: 4s"></div>
                    </div>
                    
                    <div class="container mx-auto px-4 text-center relative z-10">
                        <h1 class="text-5xl md:text-7xl font-bold mb-6 font-script gold-gradient animate-flip-in">
                            Chaaye Junction
                        </h1>
                        <p class="text-xl md:text-2xl mb-6 animate-fade-in-up" style="animation-delay: 0.3s">
                            Freshness in Every Sip
                        </p>
                        <p class="text-lg mb-8 glass-effect inline-block px-6 py-3 rounded-full animate-fade-in-up" style="animation-delay: 0.5s">
                            ${restaurantPhone}
                        </p>
                        <div class="flex flex-col md:flex-row gap-4 justify-center items-center animate-fade-in-up" style="animation-delay: 0.7s">
                            <button onclick="app.showMenuOnly()" class="premium-btn">
                                üçµ View Our Menu
                            </button>
                            <a href="tel:${restaurantPhone.replace(/\s+/g, '')}" class="secondary-btn">
                                üìû Call Now
                            </a>
                        </div>
                    </div>
                </section>
            `;
        };

        const FeaturesSection = () => {
            const featuresHtml = features.map((feature, index) => `
                <div class="feature-card glass-effect p-6 rounded-2xl text-center stagger-item transform transition-all duration-300 hover:scale-105 hover:bg-white/20 group"
                     style="animation-delay: ${index * 0.1}s">
                    <div class="text-4xl mb-4 group-hover:scale-110 transition-transform duration-300">${feature.icon}</div>
                    <h3 class="font-bold text-white mb-2 text-lg">${feature.title}</h3>
                    <p class="text-gray-300 text-sm">${feature.desc}</p>
                </div>
            `).join('');

            return `
                <section class="py-16 luxury-bg">
                    <div class="container mx-auto px-4">
                        <h2 class="text-4xl font-bold text-center gold-gradient mb-12 font-script">Our Features</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            ${featuresHtml}
                        </div>
                    </div>
                </section>
            `;
        };

        const CategorySection = (title, items, onAddToCart) => {
            const itemsHtml = items.map((item, index) => `
                <div id="menu-item-${item.name.replace(/\s+/g, '-')}" 
                     class="glass-effect p-6 rounded-2xl shadow-2xl hover:shadow-2xl transition-all duration-500 border border-gray-700 flex justify-between items-center group menu-item-card stagger-item cursor-pointer"
                     style="animation-delay: ${index * 0.1}s">
                    <div class="flex items-center gap-4">
                        <div class="bg-gradient-to-br from-#d4af37 to-#ff6b35 p-4 rounded-2xl text-white group-hover:scale-110 transition-transform duration-300">
                            ${getIcon(item.icon)}
                        </div>
                        <div>
                            <h3 id="item-name-${item.name.replace(/\s+/g, '-')}" class="font-bold text-white text-lg item-name">${item.name}</h3>
                            <p class="text-xs text-gray-400">${item.desc}</p>
                            <p class="price-tag gold-gradient font-semibold mt-2 transition-all duration-300 text-lg">Rs. ${item.price}</p>
                            <div class="flex gap-1 mt-2">
                                ${item.tags.map(tag => `<span class="text-xs bg-white/10 px-2 py-1 rounded-full">${tag}</span>`).join('')}
                            </div>
                        </div>
                    </div>
                    <button id="add-btn-${item.name.replace(/\s+/g, '-')}" 
                            onclick="event.stopPropagation(); ${onAddToCart}({name: '${item.name}', price: ${item.price}})" 
                            class="ripple-effect bg-gradient-to-r from-#d4af37 to-#ff6b35 hover:from-#ff6b35 hover:to-#d4af37 text-white p-3 rounded-xl transition-all duration-300 active:scale-95 add-to-cart-btn font-bold text-lg">
                        +
                    </button>
                </div>
            `).join('');

            return `
                <div class="mb-12 category-section">
                    <h2 class="text-3xl font-bold gold-gradient mb-8 border-b-2 border-#d4af37 border-opacity-30 pb-3 inline-block font-script">
                        ${title}
                    </h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        ${itemsHtml}
                    </div>
                </div>
            `;
        };

        const TestimonialsSection = () => {
            const testimonialsHtml = testimonials.map((testimonial, index) => `
                <div class="glass-effect p-6 rounded-2xl stagger-item border border-gray-700" style="animation-delay: ${index * 0.1}s">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center gap-2 text-yellow-400 text-lg">
                            ${'‚òÖ'.repeat(testimonial.rating)}${'‚òÜ'.repeat(5 - testimonial.rating)}
                        </div>
                        ${testimonial.verified ? '<span class="text-green-400 text-sm">Verified</span>' : ''}
                    </div>
                    <p class="text-gray-300 mb-4 italic text-sm leading-relaxed">"${testimonial.comment}"</p>
                    <p class="font-semibold gold-gradient">- ${testimonial.name}</p>
                </div>
            `).join('');

            return `
                <section class="py-16 luxury-bg">
                    <div class="container mx-auto px-4">
                        <h2 class="text-4xl font-bold text-center gold-gradient mb-12 font-script">Customer Reviews</h2>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            ${testimonialsHtml}
                        </div>
                    </div>
                </section>
            `;
        };

        const CartSheet = (isOpen, cart, onToggle, onUpdateQuantity, onOpenOrderModal, onDownloadPdf) => {
            if (!isOpen) return '';

            const cartItems = Object.keys(cart);
            const total = cartItems.reduce((sum, name) => sum + (cart[name].price * cart[name].qty), 0);

            const cartItemsHtml = cartItems.length === 0 ? `
                <div class="h-full flex flex-col items-center justify-center text-gray-400 py-20">
                    <span class="text-6xl mb-4 opacity-50 animate-float-3d">üõí</span>
                    <p class="text-lg">Your cart is empty</p>
                    <p class="text-sm opacity-70 mt-2">Add some delicious items to get started!</p>
                </div>
            ` : cartItems.map(name => `
                <div class="flex justify-between items-center glass-effect p-4 rounded-xl border border-gray-700 mb-3">
                    <div class="flex-1">
                        <h4 class="font-semibold text-white text-lg">${name}</h4>
                        <p class="text-sm text-gray-400">Rs. ${cart[name].price} x ${cart[name].qty}</p>
                        <p class="text-xs gold-gradient font-bold">Total: Rs. ${cart[name].price * cart[name].qty}</p>
                    </div>
                    <div class="flex items-center gap-3 glass-effect rounded-xl p-2">
                        <button onclick="${onUpdateQuantity}('${name}', ${cart[name].qty - 1})" 
                                class="w-8 h-8 flex items-center justify-center hover:bg-red-500/20 rounded-lg text-red-400 transition-colors">
                            ‚àí
                        </button>
                        <span class="font-bold w-8 text-center text-white">${cart[name].qty}</span>
                        <button onclick="${onUpdateQuantity}('${name}', ${cart[name].qty + 1})" 
                                class="w-8 h-8 flex items-center justify-center hover:bg-green-500/20 rounded-lg text-green-400 transition-colors">
                            +
                        </button>
                    </div>
                </div>
            `).join('');

            return `
                <div class="fixed inset-0 z-50 flex justify-end">
                    <div class="absolute inset-0 bg-black/80 backdrop-blur-lg" onclick="${onToggle}"></div>
                    <div class="relative w-full max-w-md luxury-bg h-full shadow-2xl flex flex-col animate-slide-in-right border-l border-gray-700">
                        <div class="p-6 bg-gradient-to-r from-#d4af37 to-#ff6b35 text-white flex justify-between items-center shadow-lg">
                            <h2 class="text-xl font-bold flex items-center gap-3">
                                <span class="text-2xl">üõí</span> 
                                <span>Your Cart</span>
                            </h2>
                            <button onclick="${onToggle}" class="hover:bg-white/20 p-2 rounded-lg transition-colors">‚úï</button>
                        </div>

                        <div class="flex-grow overflow-y-auto p-6">
                            ${cartItemsHtml}
                        </div>

                        <div class="p-6 border-t border-gray-700 glass-effect">
                            <div class="flex justify-between items-center mb-6 text-xl font-bold gold-gradient">
                                <span>Grand Total:</span>
                                <span>Rs. ${total}</span>
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <button onclick="${onDownloadPdf}"
                                        ${cartItems.length === 0 ? 'disabled' : ''}
                                        class="flex items-center justify-center gap-2 glass-effect text-white py-4 rounded-xl font-semibold hover:scale-105 transition-all duration-300 ${cartItems.length === 0 ? 'opacity-50 cursor-not-allowed' : 'hover:bg-white/10'} border border-gray-600">
                                    üìÑ Download Invoice
                                </button>
                                <button onclick="${onOpenOrderModal}"
                                        ${cartItems.length === 0 ? 'disabled' : ''}
                                        class="order-btn">
                                    üí¨ WhatsApp Order
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        };

        const OrderModal = (isOpen, onClose, onConfirm) => {
            if (!isOpen) return '';

            return `
                <div class="fixed inset-0 z-50 flex items-center justify-center p-4">
                    <div class="absolute inset-0 bg-black/80 backdrop-blur-lg" onclick="${onClose}"></div>
                    <div class="glass-effect w-full max-w-md rounded-2xl shadow-2xl z-10 overflow-hidden animate-scale-in border border-gray-700">
                        <div class="bg-gradient-to-r from-#d4af37 to-#ff6b35 p-6 text-white flex justify-between items-center">
                            <h3 class="font-bold text-xl flex items-center gap-2">
                                <span>üöÄ</span> Order Details
                            </h3>
                            <button onclick="${onClose}" class="hover:bg-white/20 p-2 rounded-lg">‚úï</button>
                        </div>
                        <form id="orderForm" class="p-6 space-y-5">
                            <div class="space-y-2 animate-form-field-appear" style="animation-delay: 0.1s">
                                <label class="text-sm font-bold text-gray-300 uppercase flex items-center gap-2">üë§ Customer Name</label>
                                <input required type="text" id="customerName" 
                                       class="w-full p-4 glass-effect border border-gray-600 rounded-xl focus:ring-2 focus:ring-#d4af37 outline-none text-white placeholder-gray-400 form-field transition-all duration-300"
                                       placeholder="Enter your full name">
                            </div>
                            <div class="space-y-2 animate-form-field-appear" style="animation-delay: 0.2s">
                                <label class="text-sm font-bold text-gray-300 uppercase flex items-center gap-2">üìû Phone Number</label>
                                <input required type="tel" id="customerPhone" 
                                       class="w-full p-4 glass-effect border border-gray-600 rounded-xl focus:ring-2 focus:ring-#d4af37 outline-none text-white placeholder-gray-400 form-field"
                                       placeholder="03XX-XXXXXXX">
                            </div>
                            <div class="space-y-2 animate-form-field-appear" style="animation-delay: 0.3s">
                                <label class="text-sm font-bold text-gray-300 uppercase flex items-center gap-2">üìç Delivery Address</label>
                                <textarea required rows="3" id="customerAddress"
                                          class="w-full p-4 glass-effect border border-gray-600 rounded-xl focus:ring-2 focus:ring-#d4af37 outline-none text-white placeholder-gray-400 form-field resize-none"
                                          placeholder="Delivery address with landmarks"></textarea>
                            </div>
                            <div class="space-y-2 animate-form-field-appear" style="animation-delay: 0.4s">
                                <label class="text-sm font-bold text-gray-300 uppercase flex items-center gap-2">üéØ Special Instructions</label>
                                <input type="text" id="customerInstructions" 
                                       class="w-full p-4 glass-effect border border-gray-600 rounded-xl focus:ring-2 focus:ring-#d4af37 outline-none text-white placeholder-gray-400 form-field"
                                       placeholder="E.g., Less sugar, Extra hot">
                            </div>
                            <button type="submit" 
                                    class="order-btn">
                                üöÄ Place Order
                            </button>
                        </form>
                    </div>
                </div>
            `;
        };

        const OrderConfirmation = () => {
            return `
                <div class="fixed inset-0 z-[60] flex items-center justify-center pointer-events-none">
                    <div class="relative">
                        <!-- Confetti Effect -->
                        <div id="confetti-container" class="absolute inset-0 pointer-events-none"></div>
                        
                        <!-- Main Confirmation -->
                        <div class="glass-effect px-10 py-8 rounded-2xl shadow-2xl flex flex-col items-center animate-hologram border-2 border-#d4af37 backdrop-blur-lg">
                            <span class="text-7xl gold-gradient mb-6 success-explosion">‚úÖ</span>
                            <h2 class="text-3xl font-bold text-white mb-2">Order Confirmed!</h2>
                            <p class="text-gray-300 text-center mb-4">Your order has been placed successfully!</p>
                            <div class="flex items-center gap-2 text-sm text-#d4af37">
                                <span>üì±</span>
                                <span>WhatsApp message sent!</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        };

        const createConfetti = () => {
            const container = document.getElementById('confetti-container');
            if (!container) return;
            
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'absolute animate-confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.background = `hsl(${Math.random() * 360}, 100%, 50%)`;
                confetti.style.width = Math.random() * 10 + 5 + 'px';
                confetti.style.height = Math.random() * 10 + 5 + 'px';
                confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                confetti.style.animationDelay = Math.random() * 2 + 's';
                container.appendChild(confetti);
                
                setTimeout(() => confetti.remove(), 2000);
            }
        };

        const MessageBox = (message, isError) => {
            if (!message) return '';
            return `
                <div class="fixed bottom-20 left-1/2 transform -translate-x-1/2 px-6 py-4 rounded-full shadow-2xl z-50 text-white font-medium text-sm animate-fade-in-up glass-effect border ${isError ? 'border-red-500' : 'border-#d4af37'} backdrop-blur-lg">
                    <div class="flex items-center gap-3">
                        <span class="text-lg">${isError ? '‚ùå' : '‚úÖ'}</span>
                        <span>${message}</span>
                    </div>
                </div>
            `;
        };

        const Footer = () => {
            return `
                <footer class="luxury-bg text-gray-400 py-12 mt-auto border-t border-gray-800">
                    <div class="container mx-auto px-4">
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                            <div class="text-center md:text-left">
                                <span class="text-4xl mb-4 opacity-70 animate-float-3d">‚òï</span>
                                <h3 class="font-bold text-xl mb-3 font-script gold-gradient">Chaaye Junction</h3>
                                <p class="text-sm">Freshness in Every Sip</p>
                            </div>
                            <div class="text-center">
                                <h4 class="font-bold mb-4 text-white">Our Features</h4>
                                <p class="text-sm mb-2">üîÆ Chaaye Junction Menu</p>
                                <p class="text-sm mb-2">üöö Free Delivery</p>
                                <p class="text-sm mb-2">‚è∞ Quick Service</p>
                                <p class="text-sm">‚≠ê Sector B,Commercial Market,Askari 11</p>
                            </div>
                            <div class="text-center">
                                <h4 class="font-bold mb-4 text-white">Contact Info</h4>
                                <p class="text-sm mb-2">${restaurantPhone}</p>
                                <p class="text-xs opacity-70">24/7 02:00 PM to 02:00 AM</p>
                            </div>
                            <div class="text-center md:text-right">
                                <h4 class="font-bold mb-4 text-white">Created By</h4>
                                <p class="text-sm mb-2">${creatorInfo.name}</p>
                                <p class="text-sm">${creatorInfo.contact}</p>
                                <div class="mt-3">
                                    <p class="text-xs opacity-70">Premium Web Solutions</p>
                                </div>
                            </div>
                        </div>
                        <div class="border-t border-gray-800 mt-8 pt-8 text-center">
                            <p class="text-xs opacity-70">
                                &copy; 2025 <strong class="gold-gradient">Chaaye Junction</strong>. All rights reserved.
                            </p>
                        </div>
                    </div>
                </footer>
            `;
        };

        // Main App
        class ChaayeJunctionApp {
            constructor() {
                this.state = {
                    isLoading: true,
                    cart: {},
                    isCartOpen: false,
                    isOrderModalOpen: false,
                    showOrderConfirmed: false,
                    message: null,
                    cartAnimation: false,
                    currentPage: 'home'
                };

                this.prevCartCount = 0;
                this.userOrderHistory = [];
                this.init();
            }

            init() {
                // Load cart from localStorage
                try {
                    const savedCart = localStorage.getItem('chaayeJunctionCart');
                    if (savedCart) {
                        this.state.cart = JSON.parse(savedCart);
                        this.prevCartCount = this.getCartCount();
                    }
                } catch (error) {
                    console.error("Failed to load cart from localStorage", error);
                }

                // Hide splash screen after 3 seconds
                setTimeout(() => {
                    this.setState({ isLoading: false });
                }, 3000);

                this.render();
            }

            getCartCount() {
                return Object.keys(this.state.cart).reduce((sum, itemName) => sum + this.state.cart[itemName].qty, 0);
            }

            setState(newState) {
                const shouldFullRender = newState.isLoading !== undefined || 
                                       newState.isCartOpen !== undefined ||
                                       newState.isOrderModalOpen !== undefined ||
                                       newState.showOrderConfirmed !== undefined ||
                                       newState.currentPage !== undefined;
                
                this.state = { ...this.state, ...newState };
                this.saveCartToStorage();

                if (shouldFullRender) {
                    this.render();
                } else {
                    this.updateCartUI();
                }
            }

            updateCartUI() {
                const cartCount = this.getCartCount();
                
                if (cartCount > this.prevCartCount) {
                    this.state.cartAnimation = true;
                    const headerElement = document.querySelector('header');
                    if(headerElement) {
                        headerElement.outerHTML = Header(cartCount, 'app.toggleCart()', this.state.cartAnimation, this.state.currentPage === 'menu-only', 'app.showHomePage()');
                    }
                    setTimeout(() => {
                        this.state.cartAnimation = false;
                        const updatedHeaderElement = document.querySelector('header');
                         if(updatedHeaderElement) {
                            updatedHeaderElement.outerHTML = Header(cartCount, 'app.toggleCart()', this.state.cartAnimation, this.state.currentPage === 'menu-only', 'app.showHomePage()');
                        }
                    }, 500);
                }
                
                this.prevCartCount = cartCount;
            }

            saveCartToStorage() {
                try {
                    localStorage.setItem('chaayeJunctionCart', JSON.stringify(this.state.cart));
                } catch (error) {
                    console.error("Failed to save cart to localStorage", error);
                }
            }

            showMessage(text, isError = false) {
                const existingMsg = document.getElementById('message-box-container');
                if(existingMsg) existingMsg.remove();
                
                const msgHtml = MessageBox(text, isError);
                if(msgHtml) {
                    const msgElement = document.createElement('div');
                    msgElement.id = 'message-box-container';
                    msgElement.innerHTML = msgHtml;
                    document.body.appendChild(msgElement);

                    setTimeout(() => {
                        msgElement.remove();
                    }, 3000);
                }
            }

            showMenuOnly() {
                this.setState({ currentPage: 'menu-only' });
            }

            showHomePage() {
                this.setState({ currentPage: 'home' });
            }

            handleAddToCart(item) {
                const newCart = { ...this.state.cart };
                if (newCart[item.name]) {
                    newCart[item.name].qty += 1;
                } else {
                    newCart[item.name] = { price: item.price, qty: 1 };
                }
                this.setState({ cart: newCart });
                
                this.showMessage(`‚úÖ ${item.name} added to cart!`);
                this.animateMenuItem(item.name);
                
                // Add to user history
                this.userOrderHistory.push({
                    items: [item.name],
                    timestamp: new Date().toISOString()
                });
            }

            animateMenuItem(itemName) {
                const itemId = `menu-item-${itemName.replace(/\s+/g, '-')}`;
                const itemNameId = `item-name-${itemName.replace(/\s+/g, '-')}`;
                const addBtnId = `add-btn-${itemName.replace(/\s+/g, '-')}`;
                
                const itemElement = document.getElementById(itemId);
                const itemNameElement = document.getElementById(itemNameId);
                const addButton = document.getElementById(addBtnId);
                
                // Create particle effect
                this.createParticleEffect(itemElement);
                
                if (itemElement) {
                    itemElement.classList.add('animate-item-added');
                    setTimeout(() => {
                        itemElement.classList.remove('animate-item-added');
                    }, 600);
                }
                
                if (itemNameElement) {
                    itemNameElement.classList.add('animate-item-name-jump');
                    setTimeout(() => {
                        itemNameElement.classList.remove('animate-item-name-jump');
                    }, 800);
                }
                
                if (addButton) {
                    const originalText = addButton.innerHTML;
                    addButton.innerHTML = '‚úì';
                    addButton.classList.add('animate-button-success');
                    
                    setTimeout(() => {
                        addButton.classList.remove('animate-button-success');
                        setTimeout(() => {
                            addButton.innerHTML = originalText;
                        }, 300);
                    }, 600);
                }
            }

            createParticleEffect(element) {
                if (!element) return;
                
                const rect = element.getBoundingClientRect();
                for (let i = 0; i < 8; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'animate-particle absolute w-2 h-2 rounded-full bg-gradient-to-r from-#d4af37 to-#ff6b35';
                    particle.style.left = rect.left + rect.width/2 + 'px';
                    particle.style.top = rect.top + rect.height/2 + 'px';
                    particle.style.setProperty('--x', (Math.random() - 0.5) * 100 + 'px');
                    particle.style.setProperty('--y', (Math.random() - 0.5) * 100 + 'px');
                    document.body.appendChild(particle);
                    
                    setTimeout(() => particle.remove(), 1500);
                }
            }

            handleUpdateQuantity(name, newQty) {
                const newCart = { ...this.state.cart };
                if (newQty <= 0) {
                    delete newCart[name];
                } else {
                    newCart[name].qty = newQty;
                }
                this.setState({ cart: newCart, isCartOpen: true });
            }

            handleConfirmOrder(details) {
                let total = 0;
                const itemsList = Object.keys(this.state.cart).map(itemName => {
                    const item = this.state.cart[itemName];
                    const itemTotal = item.price * item.qty;
                    total += itemTotal;
                    return `‚Ä¢ ${item.qty}x ${itemName}\n  (Rs. ${item.price} √ó ${item.qty} = *Rs. ${itemTotal}*)`;
                }).join('\n');
                
                const instructions = details.instructions || "None";
                const separator = '‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ';

                let messageText = `‚òï *CHAAYE JUNCTION - ORDER* ‚òï\n\n`;
                messageText += `*Order Details:*\n${separator}\n${itemsList}\n\n`;
                messageText += `${separator}\n*Grand Total: Rs. ${total}*\n\n`;
                messageText += `*Customer Information:*\nüë§ Customer: ${details.name}\nüìû Phone: ${details.phone}\nüè† Address: ${details.address}\nüéØ Instructions: ${instructions}\n\n`;
                messageText += `Thank you for choosing Chaaye Junction! ‚òï‚ú®\n${separator}\n_Created by ${creatorInfo.name} (${creatorInfo.contact})_`;

                const url = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(messageText)}`;
                window.open(url, '_blank');

                this.setState({ 
                    showOrderConfirmed: true,
                    cart: {},
                    isOrderModalOpen: false,
                    isCartOpen: false
                });

                // Create confetti effect
                createConfetti();

                setTimeout(() => {
                    this.setState({ showOrderConfirmed: false });
                }, 4000);
            }

            handleDownloadPdf() {
                if (Object.keys(this.state.cart).length === 0) {
                    this.showMessage("Please add items to your cart first!", true);
                    return;
                }

                if (typeof jspdf === 'undefined') {
                    this.showMessage("PDF Generator is loading, please try again in 2 seconds...", true);
                    return;
                }

                try {
                    const { jsPDF } = jspdf;
                    const doc = new jsPDF();
                    
                    const customerName = "Customer";
                    const orderId = `CJ-${Math.floor(100000 + Math.random() * 900000)}`;
                    const date = new Date().toLocaleString('en-US', {
                        year: 'numeric', month: '2-digit', day: '2-digit',
                        hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true
                    });
                    let total = 0;
                    let y = 85;

                    // Luxury Background
                    doc.setFillColor(26, 26, 26);
                    doc.rect(0, 0, doc.internal.pageSize.width, doc.internal.pageSize.height, 'F');
                    
                    // Gold Header
                    doc.setFillColor(212, 175, 55);
                    doc.rect(0, 0, doc.internal.pageSize.width, 40, 'F');
                    
                    doc.setTextColor(255, 255, 255);
                    doc.setFont('helvetica', 'bold');
                    doc.setFontSize(20);
                    doc.text("CHAAYE JUNCTION", 105, 22, { align: 'center' });
                    
                    doc.setFont('helvetica', 'normal');
                    doc.setFontSize(10);
                    doc.setTextColor(255, 255, 255, 0.8);
                    doc.text("Sector B,Commercial Market,Askari 11", 105, 30, { align: 'center' });

                    // Invoice Info
                    doc.setTextColor(212, 175, 55);
                    doc.setFont('helvetica', 'bold');
                    doc.setFontSize(18);
                    doc.text("INVOICE", 20, 60);

                    doc.setFont('helvetica', 'normal');
                    doc.setFontSize(10);
                    doc.setTextColor(224, 224, 224);
                    doc.text(`Order ID: ${orderId}`, 20, 70);
                    doc.text(`Customer: ${customerName}`, 20, 76);
                    
                    doc.text(`Date: ${date}`, 190, 70, { align: 'right' });

                    // Table Header
                    doc.setFillColor(55, 55, 55);
                    doc.rect(20, y - 8, 170, 10, 'F');
                    
                    doc.setFont('helvetica', 'bold');
                    doc.setTextColor(212, 175, 55);
                    doc.text("ITEMS", 25, y);
                    doc.text("QTY", 120, y, { align: 'right' });
                    doc.text("PRICE", 155, y, { align: 'right' });
                    doc.text("TOTAL", 190, y, { align: 'right' });
                    y += 12;

                    // Table Items
                    doc.setFont('helvetica', 'normal');
                    doc.setTextColor(224, 224, 224);
                    for (const name of Object.keys(this.state.cart)) {
                        const item = this.state.cart[name];
                        const itemTotal = item.price * item.qty;
                        total += itemTotal;
                        
                        doc.text(name, 25, y);
                        doc.text(item.qty.toString(), 120, y, { align: 'right' });
                        doc.text(`Rs. ${item.price}`, 155, y, { align: 'right' });
                        doc.text(`Rs. ${itemTotal}`, 190, y, { align: 'right' });
                        y += 8;
                        
                        if (y > 250) {
                            doc.addPage();
                            y = 40;
                        }
                    }

                    // Total
                    y += 10;
                    doc.setDrawColor(212, 175, 55);
                    doc.line(125, y, 190, y);
                    y += 8;
                    
                    doc.setFont('helvetica', 'bold');
                    doc.setFontSize(12);
                    doc.setTextColor(212, 175, 55);
                    doc.text("GRAND TOTAL", 125, y);
                    doc.text(`Rs. ${total}`, 190, y, { align: 'right' });
                    
                    // Footer
                    const pageHeight = doc.internal.pageSize.height;
                    doc.setFont('helvetica', 'normal');
                    doc.setFontSize(8);
                    doc.setTextColor(160, 160, 160);
                    const footerY = pageHeight - 20;
                    doc.text("Thank you for your order!", 105, footerY, { align: 'center' });
                    doc.text(`Created by ${creatorInfo.name} | Contact: ${creatorInfo.contact}`, 105, footerY + 5, { align: 'center' });
                    doc.text("¬© 2025 Chaaye Junction. All rights reserved.", 105, footerY + 10, { align: 'center' });

                    doc.save(`ChaayeJunction_Invoice_${orderId}.pdf`);
                    this.showMessage("üöÄ PDF Invoice downloaded!");

                } catch (e) {
                    this.showMessage("Failed to generate PDF.", true);
                    console.error("PDF Generation Error:", e);
                }
            }

            MenuOnlyPage(menuData, onAddToCart) {
                const cartCount = this.getCartCount();
                return `
                    <div class="menu-only-page luxury-bg min-h-screen">
                        ${Header(cartCount, 'app.toggleCart()', this.state.cartAnimation, true, 'app.showHomePage()')}
                        
                        <section class="py-12 luxury-bg">
                            <div class="container mx-auto px-4">
                                <div class="text-center mb-12">
                                    <h2 class="text-4xl md:text-5xl font-bold gold-gradient mb-4 font-script animate-flip-in">Premium Menu</h2>
                                    <p class="text-gray-400 text-lg">Explore our delicious offerings</p>
                                    <div class="mt-4 flex justify-center gap-4">
                                        <a href="tel:${restaurantPhone.replace(/\s+/g, '')}" class="secondary-btn">
                                            üìû Call Now
                                        </a>
                                    </div>
                                </div>
                                ${CategorySection("‚òï PREMIUM CHAAYE", menuData.chaaye, onAddToCart)}
                                ${CategorySection("‚≠ê ELITE COFFEE", menuData.coffee, onAddToCart)}
                                ${CategorySection("üçÆ GOURMET DESSERTS", menuData.desserts, onAddToCart)}
                            </div>
                        </section>

                        ${CartSheet(
                            this.state.isCartOpen,
                            this.state.cart,
                            'app.toggleCart()',
                            'app.handleUpdateQuantity',
                            'app.openOrderModal()',
                            'app.handleDownloadPdf()'
                        )}

                        ${OrderModal(
                            this.state.isOrderModalOpen,
                            'app.closeOrderModal()',
                            'app.submitOrder()'
                        )}

                        ${this.state.showOrderConfirmed ? OrderConfirmation() : ''}
                        
                        ${Footer()}
                    </div>
                `;
            }

            render() {
                const cartCount = this.getCartCount();
                let pageHtml = '';

                if (this.state.isLoading) {
                    pageHtml = SplashScreen();
                } else if (this.state.currentPage === 'menu-only') {
                    pageHtml = this.MenuOnlyPage(menuData, 'app.handleAddToCart');
                } else {
                    pageHtml = `
                        <div class="text-gray-800 flex flex-col min-h-screen luxury-bg">
                            ${Header(cartCount, 'app.toggleCart()', this.state.cartAnimation, false, 'app.showHomePage()')}
                            
                            ${HeroSection()}
                            
                            ${FeaturesSection()}
                            
                            ${TestimonialsSection()}

                            ${CartSheet(
                                this.state.isCartOpen,
                                this.state.cart,
                                'app.toggleCart()',
                                'app.handleUpdateQuantity',
                                'app.openOrderModal()',
                                'app.handleDownloadPdf()'
                            )}

                            ${OrderModal(
                                this.state.isOrderModalOpen,
                                'app.closeOrderModal()',
                                'app.submitOrder()'
                            )}

                            ${this.state.showOrderConfirmed ? OrderConfirmation() : ''}
                            
                            ${Footer()}
                        </div>
                    `;
                }

                document.getElementById('root').innerHTML = pageHtml;
                this.setupEventListeners();
            }

            setupEventListeners() {
                if (this.state.isOrderModalOpen) {
                    setTimeout(() => {
                        const form = document.getElementById('orderForm');
                        if (form) {
                            form.addEventListener('submit', (e) => {
                                e.preventDefault();
                                this.submitOrder();
                            });
                        }

                        const formFields = document.querySelectorAll('.form-field');
                        formFields.forEach(field => {
                            field.addEventListener('focus', () => {
                                field.classList.add('animate-field-focus');
                                setTimeout(() => {
                                    field.classList.remove('animate-field-focus');
                                }, 500);
                            });
                        });
                    }, 100);
                }
            }

            // Public methods for event handlers
            toggleCart() {
                this.setState({ isCartOpen: !this.state.isCartOpen });
            }

            openOrderModal() {
                if (Object.keys(this.state.cart).length === 0) {
                    this.showMessage("Please add items to your cart first!", true);
                    return;
                }
                this.setState({ 
                    isOrderModalOpen: true,
                    isCartOpen: false
                });
            }

            closeOrderModal() {
                this.setState({ isOrderModalOpen: false });
            }

            submitOrder() {
                const name = document.getElementById('customerName')?.value;
                const phone = document.getElementById('customerPhone')?.value;
                const address = document.getElementById('customerAddress')?.value;
                const instructions = document.getElementById('customerInstructions')?.value;

                if (!name || !phone || !address) {
                    this.showMessage("Please fill in all required fields!", true);
                    return;
                }

                this.handleConfirmOrder({
                    name,
                    phone,
                    address,
                    instructions
                });
            }
        }

        // Initialize the app
        const app = new ChaayeJunctionApp();
        window.app = app;
    </script>
</body>
</html>